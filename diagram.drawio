<mxfile host="app.diagrams.net" modified="2023-05-17T20:29:27.159Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36" version="21.3.2" etag="Hq50WgBEkJzM6vMzIIvG" type="device">
  <diagram id="iF8xHgiSgybCKe25PEMC" name="Strona-1">
    <mxGraphModel dx="4897" dy="2583" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" background="none" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="node17" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CustomUserDetailsService&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- userRepository: UserRepository&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- mapRolesToAuthorities(List&amp;lt;Role&amp;gt;): Collection&amp;lt;GrantedAuthority&amp;gt;&lt;br/&gt;+ loadUserByUsername(String): UserDetails&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="-723" y="1821" width="476" height="107" as="geometry" />
        </mxCell>
        <mxCell id="node6" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;GabinetStomatologicznyApplication&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ main(String[]): void&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="327" y="-349" width="975" height="120" as="geometry" />
        </mxCell>
        <mxCell id="node18" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;HomeController&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- userService: UserService&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ home(): String&lt;br/&gt;+ register(Model): String&lt;br/&gt;+ registration(UserDto, BindingResult, Model): String&lt;br/&gt;+ login(): String&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="2504" y="-96" width="356" height="164" as="geometry" />
        </mxCell>
        <mxCell id="node4" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;enumeration&amp;gt;&amp;gt;&lt;/i&gt;&lt;br/&gt;&lt;b&gt;Message&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ RESCHEDULE_VISIT: &lt;br/&gt;+ ADD_BALANCE: &lt;br/&gt;+ CANCEL_VISIT: &lt;br/&gt;- message: String&lt;br/&gt;+ PAY_VISIT: &lt;br/&gt;+ NEW_VISIT: &lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ getMessage(): String&lt;br/&gt;+ valueOf(String): Message&lt;br/&gt;+ values(): Message[]&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="1623" y="1346" width="179" height="231" as="geometry" />
        </mxCell>
        <mxCell id="node8" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Notification&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- isRead: Boolean&lt;br/&gt;- timestamp: LocalDateTime&lt;br/&gt;- recipient: User&lt;br/&gt;- message: String&lt;br/&gt;- id: Long&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ getMessage(): String&lt;br/&gt;+ getId(): Long&lt;br/&gt;+ setTimestamp(LocalDateTime): void&lt;br/&gt;+ builder(): NotificationBuilder&lt;br/&gt;+ getRecipient(): User&lt;br/&gt;+ getIsRead(): Boolean&lt;br/&gt;+ getTimestamp(): LocalDateTime&lt;br/&gt;+ setId(Long): void&lt;br/&gt;+ setMessage(String): void&lt;br/&gt;+ setRecipient(User): void&lt;br/&gt;+ setIsRead(Boolean): void&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="72" y="784" width="234" height="385" as="geometry" />
        </mxCell>
        <mxCell id="node28" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;NotificationAPI&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- notificationService: NotificationService&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ findNotificationsForLoggedInUser(Principal): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ findUnreadNotificationsForLoggedInUser(Principal): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ readNotification(Long): ResponseEntity&amp;lt;?&amp;gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="21" y="108" width="356" height="165" as="geometry" />
        </mxCell>
        <mxCell id="node20" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br/&gt;&lt;b&gt;NotificationRepository&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ findAllByRecipient(User): List&amp;lt;Notification&amp;gt;&lt;br/&gt;+ findAllByRecipientAndIsReadEquals(User, boolean): List&amp;lt;Notification&amp;gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="-21" y="653" width="440" height="95" as="geometry" />
        </mxCell>
        <mxCell id="node11" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;NotificationService&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- notificationRepository: NotificationRepository&lt;br/&gt;- userService: UserService&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ findAllNotificationsForUser(String): List&amp;lt;Notification&amp;gt;&lt;br/&gt;+ notify(String, User): void&lt;br/&gt;+ findAllUnreadNotificationsForUser(String): List&amp;lt;Notification&amp;gt;&lt;br/&gt;+ readNotification(Long): void&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="21" y="312" width="356" height="164" as="geometry" />
        </mxCell>
        <mxCell id="node25" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;OpenApiConfig&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="2605" y="335" width="153" height="31" as="geometry" />
        </mxCell>
        <mxCell id="node24" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Role&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- id: Long&lt;br/&gt;- roleType: RoleType&lt;br/&gt;- users: List&amp;lt;User&amp;gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ getId(): Long&lt;br/&gt;+ getRoleType(): RoleType&lt;br/&gt;+ getUsers(): List&amp;lt;User&amp;gt;&lt;br/&gt;+ setId(Long): void&lt;br/&gt;+ setRoleType(RoleType): void&lt;br/&gt;+ setUsers(List&amp;lt;User&amp;gt;): void&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="-439" y="1543" width="192" height="231" as="geometry" />
        </mxCell>
        <mxCell id="node1" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br/&gt;&lt;b&gt;RoleRepository&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ findByRoleType(RoleType): Role&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="-723" y="1417" width="476" height="68" as="geometry" />
        </mxCell>
        <mxCell id="node7" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;enumeration&amp;gt;&amp;gt;&lt;/i&gt;&lt;br/&gt;&lt;b&gt;RoleType&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ ROLE_PATIENT: &lt;br/&gt;+ ROLE_DOCTOR: &lt;br/&gt;+ ROLE_ADMIN: &lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ getRoleType(String): RoleType&lt;br/&gt;+ values(): RoleType[]&lt;br/&gt;+ valueOf(String): RoleType&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="-723" y="1543" width="204" height="231" as="geometry" />
        </mxCell>
        <mxCell id="node22" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;SpringSecurity&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- userDetailsService: UserDetailsService&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ passwordEncoder(): PasswordEncoder&lt;br/&gt;+ configureGlobal(AuthenticationManagerBuilder): void&lt;br/&gt;+ filterChain(HttpSecurity): SecurityFilterChain&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="2516" y="167" width="331" height="131" as="geometry" />
        </mxCell>
        <mxCell id="node3" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Surgery&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- id: Long&lt;br/&gt;- name: String&lt;br/&gt;- price: Double&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ getId(): Long&lt;br/&gt;+ getName(): String&lt;br/&gt;+ getPrice(): Double&lt;br/&gt;+ setId(Long): void&lt;br/&gt;+ setName(String): void&lt;br/&gt;+ setPrice(Double): void&lt;br/&gt;+ builder(): SurgeryBuilder&lt;br/&gt;+ toString(): String&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="728" y="784" width="174" height="275" as="geometry" />
        </mxCell>
        <mxCell id="node10" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;SurgeryAPI&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- surgeryService: SurgeryService&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ editSurgeryPrice(String, double): ResponseEntity&amp;lt;Surgery&amp;gt;&lt;br/&gt;+ addSurgery(String, double): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ deleteSurgery(String): ResponseEntity&amp;lt;String&amp;gt;&lt;br/&gt;+ findAllSurgeries(): ResponseEntity&amp;lt;List&amp;lt;Surgery&amp;gt;&amp;gt;&lt;br/&gt;+ findSurgeryByName(String): ResponseEntity&amp;lt;Surgery&amp;gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="637" y="108" width="356" height="164" as="geometry" />
        </mxCell>
        <mxCell id="node5" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;SurgeryController&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- surgeryService: SurgeryService&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ surgeries(Model): String&lt;br/&gt;+ surgeries(SecurityContextHolderAwareRequestWrapper): String&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="637" y="-96" width="356" height="165" as="geometry" />
        </mxCell>
        <mxCell id="node19" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;SurgeryNotFoundException&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="699" y="1085" width="231" height="31" as="geometry" />
        </mxCell>
        <mxCell id="node21" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br/&gt;&lt;b&gt;SurgeryRepository&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ findByName(String): Optional&amp;lt;Surgery&amp;gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="595" y="653" width="440" height="95" as="geometry" />
        </mxCell>
        <mxCell id="node14" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;SurgeryService&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- LOGGER: Logger&lt;br/&gt;- surgeryRepository: SurgeryRepository&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ deleteSurgery(String): boolean&lt;br/&gt;+ addSurgery(String, double): Surgery&lt;br/&gt;+ findAllSurgeries(): List&amp;lt;Surgery&amp;gt;&lt;br/&gt;+ editSurgeryPrice(String, double): Optional&amp;lt;Surgery&amp;gt;&lt;br/&gt;+ findSurgeryByName(String): Optional&amp;lt;Surgery&amp;gt;&lt;br/&gt;+ getPriceForSurgeries(List&amp;lt;Surgery&amp;gt;): double&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="637" y="312" width="356" height="164" as="geometry" />
        </mxCell>
        <mxCell id="node16" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;User&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- password: String&lt;br/&gt;- balance: Double&lt;br/&gt;- email: String&lt;br/&gt;- firstName: String&lt;br/&gt;- lastName: String&lt;br/&gt;- roles: List&amp;lt;Role&amp;gt;&lt;br/&gt;- id: Long&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ getEmail(): String&lt;br/&gt;+ setLastName(String): void&lt;br/&gt;+ getId(): Long&lt;br/&gt;+ getFirstName(): String&lt;br/&gt;+ getLastName(): String&lt;br/&gt;+ builder(): UserBuilder&lt;br/&gt;+ getPassword(): String&lt;br/&gt;+ setPassword(String): void&lt;br/&gt;+ getBalance(): Double&lt;br/&gt;+ getRoles(): List&amp;lt;Role&amp;gt;&lt;br/&gt;+ setEmail(String): void&lt;br/&gt;+ setRoles(List&amp;lt;Role&amp;gt;): void&lt;br/&gt;+ setId(Long): void&lt;br/&gt;+ setBalance(Double): void&lt;br/&gt;+ setFirstName(String): void&lt;br/&gt;+ payAndGet(double): double&lt;br/&gt;+ addBalanceAndGet(double): double&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="-723" y="784" width="235" height="561" as="geometry" />
        </mxCell>
        <mxCell id="node23" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;UserAPI&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- userService: UserService&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ addBalance(double, Principal, SecurityContextHolderAwareRequestWrapper): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ findDoctors(): ResponseEntity&amp;lt;List&amp;lt;User&amp;gt;&amp;gt;&lt;br/&gt;+ getBalance(Principal): ResponseEntity&amp;lt;?&amp;gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="-628" y="108" width="356" height="165" as="geometry" />
        </mxCell>
        <mxCell id="node12" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;UserDto&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- id: Long&lt;br/&gt;- lastName: String&lt;br/&gt;- firstName: String&lt;br/&gt;- password: String&lt;br/&gt;- roleType: RoleType&lt;br/&gt;- email: String&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ getId(): Long&lt;br/&gt;+ getFirstName(): String&lt;br/&gt;+ setEmail(String): void&lt;br/&gt;+ setRoleType(RoleType): void&lt;br/&gt;+ setPassword(String): void&lt;br/&gt;+ getLastName(): String&lt;br/&gt;+ getEmail(): String&lt;br/&gt;+ getPassword(): String&lt;br/&gt;+ getRoleType(): RoleType&lt;br/&gt;+ setId(Long): void&lt;br/&gt;+ setFirstName(String): void&lt;br/&gt;+ setLastName(String): void&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="-439" y="784" width="192" height="561" as="geometry" />
        </mxCell>
        <mxCell id="node26" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br/&gt;&lt;b&gt;UserRepository&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ findByRolesIn(List&amp;lt;Role&amp;gt;): List&amp;lt;User&amp;gt;&lt;br/&gt;+ findByEmail(String): Optional&amp;lt;User&amp;gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="-628" y="653" width="356" height="95" as="geometry" />
        </mxCell>
        <mxCell id="node2" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;UserService&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- surgeryService: SurgeryService&lt;br/&gt;- userRepository: UserRepository&lt;br/&gt;- roleRepository: RoleRepository&lt;br/&gt;- passwordEncoder: PasswordEncoder&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ saveUser(UserDto): void&lt;br/&gt;+ addBalance(String, double): double&lt;br/&gt;+ findUserByEmail(String): Optional&amp;lt;User&amp;gt;&lt;br/&gt;- createRoleIfDoesNotExist(RoleType): Role&lt;br/&gt;+ pay(String, List&amp;lt;Surgery&amp;gt;): double&lt;br/&gt;+ getBalance(String): double&lt;br/&gt;+ findUsersByRoleName(String): List&amp;lt;User&amp;gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="-628" y="312" width="356" height="275" as="geometry" />
        </mxCell>
        <mxCell id="node15" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Visit&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- start: LocalDateTime&lt;br/&gt;- doctor: User&lt;br/&gt;- id: Long&lt;br/&gt;- end: LocalDateTime&lt;br/&gt;- paid: boolean&lt;br/&gt;- surgeries: List&amp;lt;Surgery&amp;gt;&lt;br/&gt;- patient: User&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ setDoctor(User): void&lt;br/&gt;+ setPaid(boolean): void&lt;br/&gt;+ builder(): VisitBuilder&lt;br/&gt;+ getId(): Long&lt;br/&gt;+ getPatient(): User&lt;br/&gt;+ getDoctor(): User&lt;br/&gt;+ getSurgeries(): List&amp;lt;Surgery&amp;gt;&lt;br/&gt;+ getStart(): LocalDateTime&lt;br/&gt;+ getEnd(): LocalDateTime&lt;br/&gt;+ isPaid(): boolean&lt;br/&gt;+ setPatient(User): void&lt;br/&gt;+ setStart(LocalDateTime): void&lt;br/&gt;+ setEnd(LocalDateTime): void&lt;br/&gt;+ setId(Long): void&lt;br/&gt;+ setSurgeries(List&amp;lt;Surgery&amp;gt;): void&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="1601" y="779" width="222" height="517" as="geometry" />
        </mxCell>
        <mxCell id="node13" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;VisitAPI&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- visitService: VisitService&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ findVisitsForDoctorWithin(Long, LocalDateTime, LocalDateTime): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ payForVisit(Long): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ findVisitsForDoctor(Long): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ scheduleVisitAsDoctor(Long, LocalDateTime, List&amp;lt;String&amp;gt;, Principal): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ findVisitById(Long): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ rescheduleVisit(Long, LocalDateTime): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ scheduleVisitAsPatient(Long, LocalDateTime, List&amp;lt;String&amp;gt;, Principal): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ findVisitsForPatient(Long): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ cancelVisit(Long): ResponseEntity&amp;lt;?&amp;gt;&lt;br/&gt;+ findVisitsForUser(Principal): ResponseEntity&amp;lt;?&amp;gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="1196" y="108" width="463" height="407" as="geometry" />
        </mxCell>
        <mxCell id="node0" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;VisitController&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- visitService: VisitService&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ visits(Principal, Model): String&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="1534" y="-96" width="356" height="165" as="geometry" />
        </mxCell>
        <mxCell id="node27" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br/&gt;&lt;b&gt;VisitRepository&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;+ findByDoctorOrPatient(User, User): List&amp;lt;Visit&amp;gt;&lt;br/&gt;+ findByDoctorAndStartGreaterThanEqualAndEndLessThanEqual(User, LocalDateTime, LocalDateTime): List&amp;lt;Visit&amp;gt;&lt;br/&gt;+ findByDoctorAndStartLessThanEqualAndEndGreaterThanEqual(User, LocalDateTime, LocalDateTime): List&amp;lt;Visit&amp;gt;&lt;br/&gt;+ findByDoctorAndStartLessThanAndEndGreaterThan(User, LocalDateTime, LocalDateTime): List&amp;lt;Visit&amp;gt;&lt;br/&gt;+ findByDoctor(User): List&amp;lt;Visit&amp;gt;&lt;br/&gt;+ findByPatient(User): List&amp;lt;Visit&amp;gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="1481" y="565" width="463" height="164" as="geometry" />
        </mxCell>
        <mxCell id="node9" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;VisitService&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- notificationService: NotificationService&lt;br/&gt;- visitRepository: VisitRepository&lt;br/&gt;- userRepository: UserRepository&lt;br/&gt;- userService: UserService&lt;br/&gt;- surgeryService: SurgeryService&lt;br/&gt;- DATE_TIME_FORMATTER: DateTimeFormatter&lt;br/&gt;- surgeryRepository: SurgeryRepository&lt;/p&gt;&lt;hr size=&quot;1&quot;/&gt;&lt;p style=&quot;margin:0 0 0 4px;line-height:1.6;&quot;&gt;- isDoctorBusy(User, LocalDateTime, LocalDateTime): boolean&lt;br/&gt;+ findVisitsForPatient(Long): List&amp;lt;Visit&amp;gt;&lt;br/&gt;+ rescheduleVisit(Long, LocalDateTime): Visit&lt;br/&gt;+ findVisitById(Long): Visit&lt;br/&gt;+ findVisitsForUser(String): List&amp;lt;Visit&amp;gt;&lt;br/&gt;+ findVisitsForDoctor(Long): List&amp;lt;Visit&amp;gt;&lt;br/&gt;+ scheduleVisit(String, Long, List&amp;lt;String&amp;gt;, LocalDateTime, boolean): Visit&lt;br/&gt;+ payForVisit(Long): void&lt;br/&gt;+ cancelVisit(Long): void&lt;br/&gt;+ findVisitsForDoctorWithin(Long, LocalDateTime, LocalDateTime): List&amp;lt;Visit&amp;gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="1766" y="108" width="458" height="407" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
